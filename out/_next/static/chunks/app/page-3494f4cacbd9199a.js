(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{3907:function(e,t,r){Promise.resolve().then(r.bind(r,977))},977:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return N}});var s=r(7437),l=r(2265),a=r(3425),o=r(3523);let n=[{id:"deepseek-chat",name:"DeepSeek Chat",provider:"DeepSeek",description:"Strong reasoning and coding abilities"},{id:"deepseek-reasoner",name:"DeepSeek Reasoner",provider:"DeepSeek",description:"Enhanced reasoning capabilities"},{id:"claude-3-5-sonnet-latest",name:"Claude 3.5 Sonnet",provider:"Anthropic",description:"Most capable model for complex tasks"},{id:"gemini-2.0-flash",name:"Gemini 2.0 Flash",provider:"Google",description:"Latest generation with enhanced capabilities"},{id:"gpt-4o-mini",name:"GPT-4o Mini",provider:"OpenAI",description:"Fast and cost-effective"},{id:"grok-3",name:"Grok-3",provider:"xAI",description:"Advanced reasoning and real-time knowledge"}];function i(e){let{selectedModel:t,onModelChange:r,disabled:a=!1,onOpenChange:i}=e,[c,d]=(0,l.useState)(!1),u=(0,l.useRef)(null),m=n.find(e=>e.id===t)||n[0],x=e=>{console.log("ModelSelector: Selected model:",e),r(e),d(!1),null==i||i(!1)};return(0,l.useEffect)(()=>{let e=e=>{u.current&&!u.current.contains(e.target)&&(d(!1),null==i||i(!1))};return c&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[c]),(0,s.jsxs)("div",{className:"relative",ref:u,children:[(0,s.jsxs)("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),console.log("ModelSelector button clicked, current isOpen:",c);let t=!c;console.log("Setting isOpen to:",t),d(t),null==i||i(t)},disabled:a,className:"flex items-center space-x-2 px-3 py-2 text-white text-xs transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed hover:text-gray-300",children:[(0,s.jsx)("span",{className:"font-medium",children:m.name}),(0,s.jsx)(o.Z,{size:12,className:"transition-transform duration-200 ".concat(c?"rotate-180":"")})]}),c&&(0,s.jsx)("div",{className:"absolute bottom-full left-0 mb-2 w-80 bg-black border border-gray-500 rounded-xl z-50 max-h-96 overflow-y-auto",children:(0,s.jsxs)("div",{className:"p-2",children:[(0,s.jsx)("div",{className:"text-xs text-gray-400 mb-2 px-2",children:"Select AI Model"}),n.map(e=>(0,s.jsx)("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),console.log("Model option clicked:",e.id),x(e.id)},className:"w-full text-left px-3 py-2 transition-colors duration-200 ".concat(t===e.id?"bg-gray-800 text-white":"hover:bg-gray-800 text-gray-300"),children:(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"font-medium text-sm",children:e.name}),(0,s.jsx)("span",{className:"text-xs text-gray-500",children:e.provider})]}),(0,s.jsx)("span",{className:"text-xs text-gray-400 mt-1",children:e.description})]})},e.id))]})})]})}function c(e){let{onSubmit:t,status:r,selectedModel:a,onModelChange:o,placeholder:n="Enter your question or idea...",className:c="",onFocus:d,initialValue:u="",onModelSelectorOpenChange:m}=e,[x,g]=(0,l.useState)(u);(0,l.useEffect)(()=>{console.log("ChatInput: initialValue changed to:",u),g(u),console.log("ChatInput: set input to:",u)},[u]);let h=e=>{e.preventDefault(),x.trim()&&(t(x.trim()),g(""))};return(0,s.jsxs)("form",{onSubmit:h,className:"relative mx-auto ".concat(c),style:{maxWidth:"720px"},children:[(0,s.jsx)("textarea",{className:"w-full p-4 pr-20 border border-gray-600 rounded-2xl focus:outline-none focus:border-gray-600 bg-gray-800 text-white placeholder-gray-400 placeholder:text-sm resize-none shadow-[0_0_20px_rgba(255,255,255,0.2)] hover:shadow-[0_0_30px_rgba(255,255,255,0.25)] focus:shadow-[0_0_100px_rgba(255,255,255,0.6)] transition-all duration-300",style:{boxShadow:"none"},onFocus:e=>{e.target.style.boxShadow="0 0 25px rgba(255,255,255,0.3)",null==d||d()},onBlur:e=>{e.target.style.boxShadow="none"},rows:4,value:x,placeholder:n,onChange:e=>g(e.target.value),disabled:"ready"!==r,onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),h(e))}}),(0,s.jsx)("button",{type:"submit",disabled:"ready"!==r||!x.trim(),className:"absolute bottom-4 right-4 w-10 h-10 bg-transparent hover:bg-white hover:bg-opacity-20 rounded-full flex items-center justify-center text-white focus:outline-none focus:ring-2 focus:ring-gray-500 disabled:opacity-50 disabled:cursor-not-allowed text-sm transition-all duration-200",children:"ready"!==r?"...":"â†‘"}),(0,s.jsx)("div",{className:"absolute bottom-4 left-4",children:(0,s.jsx)(i,{selectedModel:a,onModelChange:o,disabled:"ready"!==r,onOpenChange:m})})]})}function d(e){let{onSubmit:t,status:r,selectedModel:a,onModelChange:o,isTransitioning:n,onTransitionStart:i,initialValue:d,onModelSelectorOpenChange:u}=e,[m,x]=(0,l.useState)(""),[g,h]=(0,l.useState)(!0),[p,f]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{let e="Please enter your question or idea...",t=0,r="typing",s=setInterval(()=>{"typing"===r&&!p&&(t<=e.length?(x(e.slice(0,t)),t++):(r="stop",h(!1)))},150);return()=>clearInterval(s)},[p]),(0,s.jsxs)("div",{className:"h-full flex flex-col justify-center transition-all duration-[900ms] ease-in-out ".concat(n?"opacity-0 transform -translate-y-8":"opacity-100 transform translate-y-0"),children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("h1",{ref:(0,l.useRef)(null),className:"text-4xl font-bold text-white mb-6",style:{textShadow:"0 0 20px rgba(147, 51, 234, 0.8), 0 0 40px rgba(59, 130, 246, 0.6)"},children:"AI Chatbot"}),(0,s.jsx)("div",{className:"text-sm text-gray-300 max-w-2xl mx-auto px-6",style:{textShadow:"0 0 10px rgba(255, 255, 255, 0.3)"},children:"Chat with intelligent AI assistant to get answers, creative inspiration, or have deep conversations. Supports multi-turn conversations, making AI your intelligent partner."})]}),(0,s.jsx)("div",{className:"pb-32 transition-all duration-[900ms] ease-in-out ".concat(n?"transform translate-y-32":"transform translate-y-0"),children:(0,s.jsx)(c,{onSubmit:e=>{i(),setTimeout(()=>{t(e)},900)},status:r,selectedModel:a,onModelChange:o,placeholder:"".concat(m).concat(g?"|":""),className:"relative",onFocus:()=>{p||(f(!0),x("Please enter your question or idea..."),h(!1))},initialValue:d,onModelSelectorOpenChange:u},"home-".concat(d))})]})}var u=r(7972),m=r(3966),x=r(6224),g=r(5432),h=r(5749),p=r(815);function f(e){let{messages:t,status:r,onRegenerate:a}=e,[o,n]=(0,l.useState)(null),i=async(e,t)=>{try{await navigator.clipboard.writeText(e),n(t),setTimeout(()=>{n(null)},2e3)}catch(e){console.error("Failed to copy text: ",e)}};return(0,s.jsx)("div",{className:"space-y-4 mb-4",children:t.map((e,l)=>{var n,c,d,f,b,y;return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-start space-x-3 mx-auto",style:{maxWidth:"720px"},children:[(0,s.jsx)("div",{className:"flex items-center justify-center w-6 h-6 rounded-lg bg-gray-800 border border-gray-700 flex-shrink-0 ".concat((e.role,"text-white")),children:"user"===e.role?(0,s.jsx)(u.Z,{size:12}):(0,s.jsx)(m.Z,{size:12})}),(0,s.jsxs)("div",{className:"flex-1",children:["assistant"===e.role?(0,s.jsx)("div",{className:"text-sm text-white",children:(0,s.jsx)(h.UG,{remarkPlugins:[p.Z],components:{p:e=>{let{children:t}=e;return(0,s.jsx)("p",{className:"mb-2 last:mb-0",children:t})},h1:e=>{let{children:t}=e;return(0,s.jsx)("h1",{className:"text-lg font-bold mb-2 mt-3 first:mt-0",children:t})},h2:e=>{let{children:t}=e;return(0,s.jsx)("h2",{className:"text-base font-bold mb-2 mt-3 first:mt-0",children:t})},h3:e=>{let{children:t}=e;return(0,s.jsx)("h3",{className:"text-sm font-bold mb-2 mt-2 first:mt-0",children:t})},ul:e=>{let{children:t}=e;return(0,s.jsx)("ul",{className:"list-disc list-inside mb-2 ml-4",children:t})},ol:e=>{let{children:t}=e;return(0,s.jsx)("ol",{className:"list-decimal list-inside mb-2 ml-4",children:t})},li:e=>{let{children:t}=e;return(0,s.jsx)("li",{className:"mb-1",children:t})},code:e=>{let{children:t,className:r}=e;return r?(0,s.jsx)("code",{className:"block bg-gray-800 p-3 rounded text-xs font-mono overflow-x-auto my-2",children:t}):(0,s.jsx)("code",{className:"bg-gray-700 px-1 py-0.5 rounded text-xs font-mono",children:t})},pre:e=>{let{children:t}=e;return(0,s.jsx)("pre",{className:"bg-gray-800 p-3 rounded overflow-x-auto my-2",children:t})},blockquote:e=>{let{children:t}=e;return(0,s.jsx)("blockquote",{className:"border-l-2 border-gray-600 pl-3 italic my-2",children:t})},table:e=>{let{children:t}=e;return(0,s.jsx)("table",{className:"border-collapse border border-gray-600 my-2",children:t})},th:e=>{let{children:t}=e;return(0,s.jsx)("th",{className:"border border-gray-600 px-2 py-1 bg-gray-700 text-left",children:t})},td:e=>{let{children:t}=e;return(0,s.jsx)("td",{className:"border border-gray-600 px-2 py-1",children:t})},a:e=>{let{children:t,href:r}=e;return(0,s.jsx)("a",{href:r,className:"text-blue-400 hover:text-blue-300 underline",target:"_blank",rel:"noopener noreferrer",children:t})}},children:(null===(d=e.parts)||void 0===d?void 0:null===(c=d.filter(e=>"text"===e.type))||void 0===c?void 0:null===(n=c.map(e=>e.text))||void 0===n?void 0:n.join(""))||""})}):(0,s.jsx)("p",{className:"text-sm whitespace-pre-wrap text-white",children:(null===(y=e.parts)||void 0===y?void 0:null===(b=y.filter(e=>"text"===e.type))||void 0===b?void 0:null===(f=b.map(e=>e.text))||void 0===f?void 0:f.join(""))||""}),"assistant"===e.role&&(0,s.jsxs)("div",{className:"flex justify-end space-x-2 mt-2",children:[(0,s.jsx)("button",{onClick:()=>{var t,r,s;return i((null===(s=e.parts)||void 0===s?void 0:null===(r=s.filter(e=>"text"===e.type))||void 0===r?void 0:null===(t=r.map(e=>e.text))||void 0===t?void 0:t.join(""))||"",e.id)},className:"p-1.5 rounded-lg border transition-all duration-200 ".concat(o===e.id?"bg-green-800 border-green-600":"bg-gray-800 hover:bg-gray-700 border-gray-600 hover:border-gray-500"),title:o===e.id?"Copied!":"Copy message",children:(0,s.jsx)(x.Z,{size:10,className:"transition-colors duration-200 ".concat(o===e.id?"text-green-400":"text-gray-400 hover:text-white")})}),(0,s.jsx)("button",{onClick:()=>a(e.id),disabled:"ready"!==r,className:"p-1.5 rounded-lg bg-gray-800 hover:bg-gray-700 border border-gray-600 hover:border-gray-500 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",title:"Regenerate response",children:(0,s.jsx)(g.Z,{size:10,className:"text-gray-400 hover:text-white"})})]})]})]}),"user"===e.role&&l===t.length-1&&"ready"!==r&&(0,s.jsxs)("div",{className:"flex items-center space-x-3 mx-auto mt-2",style:{maxWidth:"720px"},children:[(0,s.jsx)("div",{className:"flex items-center justify-center w-6 h-6 rounded-lg bg-gray-800 border border-gray-700 flex-shrink-0",children:(0,s.jsx)(m.Z,{size:12,className:"text-white"})}),(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsx)("span",{className:"text-gray-400 text-sm",children:"AI is thinking"}),(0,s.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-pulse"}),(0,s.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-pulse",style:{animationDelay:"0.2s"}}),(0,s.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-pulse",style:{animationDelay:"0.4s"}})]})})]})]},e.id)})})}var b=r(1981);function y(e){let{errorMessage:t,onRetry:r}=e;return(0,s.jsx)("div",{className:"mx-auto",style:{maxWidth:"720px"},children:(0,s.jsx)("div",{className:"p-2 pl-0",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(b.Z,{className:"w-4 h-4 text-red-500 flex-shrink-0"}),(0,s.jsx)("p",{className:"text-red-400 text-sm",children:t}),(0,s.jsx)("button",{onClick:r,className:"ml-auto text-red-400 hover:text-red-300 text-sm underline",children:"Retry"})]})})})}var v=r(9263);function j(e){let{show:t,onClick:r}=e;return t?(0,s.jsx)("button",{onClick:r,className:"fixed bottom-40 left-1/2 transform -translate-x-1/2 z-30 w-7 h-7 bg-gray-800 hover:bg-gray-700 border border-gray-700 rounded-lg flex items-center justify-center text-white transition-colors duration-200",title:"Scroll to bottom",children:(0,s.jsx)(v.Z,{size:16})}):null}function N(){let[e,t]=(0,l.useState)(!1),[r,o]=(0,l.useState)(!1),[n,i]=(0,l.useState)(!1),[u,m]=(0,l.useState)(!1),{messages:x,status:g,error:h,selectedModel:p,setSelectedModel:b,errorMessage:v,lastUserMessage:N,handleSendMessage:w,handleRegenerate:S,clearError:k,clearLastUserMessage:C}=function(){let[e,t]=(0,l.useState)("deepseek-chat"),[r,s]=(0,l.useState)(""),[o,n]=(0,l.useState)(""),{messages:i,sendMessage:c,status:d,error:u,regenerate:m,setMessages:x,clearError:g}=(0,a.RJ)({onError:e=>{if(console.error("Chat error:",e),console.error("Error details:",{message:e.message,name:e.name,stack:e.stack}),e.message)try{let t=JSON.parse(e.message);if(console.log("Parsed error data:",t),t.error||t.message){console.log("Setting error message:",t.message),s(t.message||"An error occurred");return}}catch(r){console.log("Non-JSON error:",e.message);let t=e.message.toLowerCase();t.includes("api key")||t.includes("authentication")||t.includes("unauthorized")?s("API key is invalid or expired. Please check your API key configuration."):t.includes("quota")||t.includes("rate limit")?s("API quota exceeded or rate limit reached. Please try again later."):t.includes("network")||t.includes("connection")?s("Network connection error. Please check your internet connection."):s(e.message)}else s("An unexpected error occurred");s("Connection error, please check your network or try again later")},onFinish:e=>{console.log("Message finished:",e)}});return{messages:i,status:d,error:u,selectedModel:e,setSelectedModel:s=>{console.log("=== MODEL CHANGE DEBUG ==="),console.log("Model changed from",e,"to",s),console.log("Current status:",d),console.log("Current messages length:",i.length),console.log("Current error:",u),console.log("Current errorMessage:",r),console.log("========================"),t(s)},errorMessage:r,lastUserMessage:o,handleSendMessage:t=>{console.log("=== SEND MESSAGE DEBUG ==="),console.log("Sending message with model:",e),console.log("Message text:",t),console.log("Current status:",d),console.log("========================"),c({text:t},{headers:{"X-Model":e}})},handleRegenerate:t=>{"ready"===d&&(console.log("Regenerating with model:",e),m({messageId:t,headers:{"X-Model":e}}))},clearError:()=>{s(""),g()},clearLastUserMessage:()=>{console.log("clearLastUserMessage called, current messages:",i.length),console.log("Messages:",i.map(e=>{var t,r;return{role:e.role,content:(null===(t=null===(r=e.parts)||void 0===r?void 0:r[0])||void 0===t?void 0:t.text)||"no text"}}));for(let r=i.length-1;r>=0;r--)if("user"===i[r].role){var e,t;console.log("Found user message at index ".concat(r,", removing it"));let s=(null===(e=null===(t=i[r].parts)||void 0===t?void 0:t[0])||void 0===e?void 0:e.text)||"";console.log("clearLastUserMessage: saving user message:",s),n(s);let l=i.slice(0,r);return x(l),0===l.length}return!1}}}(),{showScrollToBottom:M,scrollToBottom:E,messagesEndRef:I}=function(e,t){let[r,s]=(0,l.useState)(!1),a=(0,l.useRef)(null);return(0,l.useEffect)(()=>{let t=()=>{if(0===e)return;let t=window.pageYOffset||document.documentElement.scrollTop,r=window.innerHeight;s(document.documentElement.scrollHeight-(t+r)>100)};return window.addEventListener("scroll",t),()=>window.removeEventListener("scroll",t)},[e]),(0,l.useEffect)(()=>{a.current&&a.current.scrollIntoView({behavior:"smooth"})},[e]),(0,l.useEffect)(()=>{if("streaming"===t&&a.current){a.current.scrollIntoView({behavior:"smooth"});let e=setInterval(()=>{a.current&&"streaming"===t&&a.current.scrollIntoView({behavior:"smooth"})},500);return()=>clearInterval(e)}},[t]),{showScrollToBottom:r,scrollToBottom:()=>{a.current&&a.current.scrollIntoView({behavior:"smooth"})},messagesEndRef:a}}(x.length,g);return(0,l.useEffect)(()=>{console.log("page.tsx: lastUserMessage changed to:",N)},[N]),(0,s.jsxs)("div",{className:"w-full max-w-4xl h-full mx-auto px-6 py-4",children:[0!==x.length||n?(0,s.jsx)("div",{className:"min-h-full transition-all duration-800 ease-in-out ".concat(r?"opacity-100 transform translate-y-0":"opacity-0 transform translate-y-8"),children:(0,s.jsx)("div",{className:"px-6 py-4 pb-48",children:(0,s.jsx)("div",{className:"w-full max-w-4xl mx-auto",children:(0,s.jsx)(f,{messages:x,status:g,onRegenerate:S})})})}):(0,s.jsx)(d,{onSubmit:e=>{w(e),o(!0),t(!1),setTimeout(()=>{i(!0)},100)},status:g,selectedModel:p,onModelChange:b,isTransitioning:e,onTransitionStart:()=>{t(!0)},initialValue:N,onModelSelectorOpenChange:m}),v&&x.length>0&&!u&&(0,s.jsx)("div",{className:"fixed left-0 right-0 z-10 px-6",style:{bottom:"155px"},children:(0,s.jsx)("div",{className:"w-full max-w-4xl mx-auto",children:(0,s.jsx)(y,{errorMessage:v,onRetry:()=>{console.log("handleRetry called, lastUserMessage before:",N),k();let e=C();console.log("handleRetry: lastUserMessage after:",N),e&&(i(!1),t(!1),o(!1))}})})}),x.length>0&&(0,s.jsx)("div",{className:"fixed bottom-0 left-0 right-0 z-20 px-6 py-4",style:{background:"linear-gradient(to top, rgba(0,0,0,1) 0%, rgba(0,0,0,0.8) 30%, rgba(0,0,0,0) 100%)"},children:(0,s.jsx)("div",{className:"w-full mx-auto",children:(0,s.jsx)(c,{onSubmit:w,status:g,selectedModel:p,onModelChange:b,initialValue:N,onModelSelectorOpenChange:m},"chat-".concat(N))})}),(0,s.jsx)(j,{show:M,onClick:E}),(0,s.jsx)("div",{ref:I})]})}}},function(e){e.O(0,[989,629,971,938,744],function(){return e(e.s=3907)}),_N_E=e.O()}]);